{"ast":null,"code":"var _jsxFileName = \"/Users/alexkondratiuk/Desktop/whats-for-dinner-1/front-end/src/Login.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { Link, Navigate, useSearchParams } from \"react-router-dom\";\nimport axios from \"axios\";\n// import logo from './logo.svg';\nimport \"./Login.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Login = props => {\n  _s();\n  let [urlSearchParams] = useSearchParams(); // get access to the URL query string parameters\n  // create state variables to hold username and password\n  const [status, setStatus] = useState({}); // the API will return an object indicating the login status in a success field of the response object\n  const [errorMessage, setErrorMessage] = useState(``); // will contain any error message that explains why the user was redirected to this page.\n\n  // if the user got here by trying to access our Protected page, there will be a query string parameter called 'error' with the value 'protected'\n  useEffect(() => {\n    const qsError = urlSearchParams.get(\"error\"); // get any 'error' field in the URL query string\n    if (qsError === \"protected\") setErrorMessage(\"Please log in to view your home page.\");\n  }, [urlSearchParams]);\n\n  // if the user's logged-in status changes, call the setuser function that was passed to this component from the PrimaryNav component.\n  useEffect(() => {\n    // if the login was a success, call the setuser function that was passed to this component as a prop\n    if (status.success) {\n      console.log(`User successfully logged in: ${status.username}`);\n      props.setuser(status);\n    }\n  }, [status, props]);\n  const handleSubmit = async e => {\n    e.preventDefault();\n    const baseUrl = process.env.REACT_APP_SERVER;\n    try {\n      const requestData = {\n        username: e.target.username.value,\n        password: e.target.password.value\n      };\n      const response = await axios.post(`${baseUrl}/auth/login`, requestData); // send the request to the backend server\n\n      console.log(response.data);\n      setStatus(response.data);\n    } catch (err) {\n      console.error(err);\n      setErrorMessage(err.response.data.message);\n    }\n  };\n\n  // if the user is not logged in, show the login form\n  if (!status.success) return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Login\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Log in\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 9\n    }, this), errorMessage ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"error\",\n      children: errorMessage\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 25\n    }, this) : \"\", /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"main-content\",\n      children: [/*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Username: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          name: \"username\",\n          placeholder: \"username\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Password: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"password\",\n          name: \"password\",\n          placeholder: \"password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"submit\",\n          value: \"Log In\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 57,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"New user? \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          children: \"Create an account\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"Forgot Password? \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 74,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/reset-password\",\n          children: \"Restore Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 56,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 7\n  }, this);\n  // otherwise, if the user has successfully logged-in, redirect them to a different page\n  // in this example, we simply redirect to the home page, but a real app would redirect \n  //to a page that shows content only available to logged-in users\n  else return /*#__PURE__*/_jsxDEV(Navigate, {\n    to: \"/home\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 83,\n    columnNumber: 15\n  }, this);\n};\n_s(Login, \"yMPVKkNM59SnKXSCpZ/JDeoLHWE=\", false, function () {\n  return [useSearchParams];\n});\n_c = Login;\nexport default Login;\nvar _c;\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"names":["React","useState","useEffect","Link","Navigate","useSearchParams","axios","jsxDEV","_jsxDEV","Login","props","_s","urlSearchParams","status","setStatus","errorMessage","setErrorMessage","qsError","get","success","console","log","username","setuser","handleSubmit","e","preventDefault","baseUrl","process","env","REACT_APP_SERVER","requestData","target","value","password","response","post","data","err","error","message","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onSubmit","type","name","placeholder","to","_c","$RefreshReg$"],"sources":["/Users/alexkondratiuk/Desktop/whats-for-dinner-1/front-end/src/Login.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\"\nimport { Link, Navigate, useSearchParams } from \"react-router-dom\"\nimport axios from \"axios\"\n// import logo from './logo.svg';\nimport \"./Login.css\"\n\nconst Login = props => {\n  let [urlSearchParams] = useSearchParams() // get access to the URL query string parameters\n  // create state variables to hold username and password\n  const [status, setStatus] = useState({}) // the API will return an object indicating the login status in a success field of the response object\n  const [errorMessage, setErrorMessage] = useState(``) // will contain any error message that explains why the user was redirected to this page.\n\n  // if the user got here by trying to access our Protected page, there will be a query string parameter called 'error' with the value 'protected'\n  useEffect(() => {\n    const qsError = urlSearchParams.get(\"error\") // get any 'error' field in the URL query string\n    if (qsError === \"protected\")\n      setErrorMessage(\n        \"Please log in to view your home page.\"\n      )\n  }, [urlSearchParams])\n\n  // if the user's logged-in status changes, call the setuser function that was passed to this component from the PrimaryNav component.\n  useEffect(() => {\n    // if the login was a success, call the setuser function that was passed to this component as a prop\n    if (status.success) {\n      console.log(`User successfully logged in: ${status.username}`)\n      props.setuser(status)\n    }\n  }, [status, props])\n\n  const handleSubmit = async e => {\n    e.preventDefault()\n    const baseUrl = process.env.REACT_APP_SERVER;\n    try {\n      const requestData = {\n        username: e.target.username.value,\n        password: e.target.password.value,\n      }\n      const response = await axios.post(`${baseUrl}/auth/login`, requestData) // send the request to the backend server\n  \n      console.log(response.data)\n      setStatus(response.data)\n    } catch (err) {\n      console.error(err)\n      setErrorMessage(err.response.data.message)\n    }\n  }\n  \n\n  // if the user is not logged in, show the login form\n  if (!status.success)\n    return (\n      <div className=\"Login\">\n        <h1>Log in</h1>\n        {errorMessage ? <p className=\"error\">{errorMessage}</p> : \"\"}\n        <section className=\"main-content\">\n          <form onSubmit={handleSubmit}>\n            {\n              //handle error condition\n            }\n            <label>Username: </label>\n            <input type=\"text\" name=\"username\" placeholder=\"username\" />\n            <label>Password: </label>\n            <input type=\"password\" name=\"password\" placeholder=\"password\" />\n            <input type=\"submit\" value=\"Log In\" />\n          </form>\n          <p>\n            <label>New user? </label>\n            <br />\n            <Link to=\"/register\">Create an account</Link>\n            <br />\n            <br />\n            <label>Forgot Password? </label>\n            <br />\n            <Link to=\"/reset-password\">Restore Password</Link>\n          </p>\n        </section>\n      </div>\n    )\n  // otherwise, if the user has successfully logged-in, redirect them to a different page\n  // in this example, we simply redirect to the home page, but a real app would redirect \n  //to a page that shows content only available to logged-in users\n  else return <Navigate to=\"/home\" />\n}\n\nexport default Login"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}