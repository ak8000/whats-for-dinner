{"ast":null,"code":"var _jsxFileName = \"/Users/alexkondratiuk/Desktop/whats-for-dinner-1/front-end/src/RecipeList.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n// import Search from \"./Search\";\nimport { Link } from \"react-router-dom\";\nimport SortBy from \"./SortBy\";\nimport SelectIng from \"./SelectIng\";\nimport \"./RecipeList.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RecipeList = props => {\n  _s();\n  const baseUrl = process.env.REACT_APP_SERVER;\n  const images = '/api/images/';\n  const [data, setData] = useState([]);\n  const [selectedIngredients, setSelectedIngredients] = useState([]);\n  const [sortOption, setSortOption] = useState(\"\");\n  const [page, setPage] = useState(1);\n  const [perPage, setPerPage] = useState(10);\n  const [sortUrl, setSortUrl] = useState(`/recipes?username=${props.user.username}&ingredients=${selectedIngredients.map(selected => selected && selected.name).join(\",\")}`);\n  const [sentRecipeIds, setSentRecipeIds] = useState([]);\n  const handleScroll = async () => {\n    const {\n      scrollTop,\n      clientHeight,\n      scrollHeight\n    } = document.documentElement;\n    if (scrollTop + clientHeight >= scrollHeight) {\n      setPage(page => page + 1);\n    }\n  };\n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.get(`${baseUrl}${sortUrl}&limit=${perPage}&sentRecipeIds=${sentRecipeIds.join(',')}`);\n        const newRecipes = response.data.recipes.filter(recipe => !sentRecipeIds.includes(recipe._id));\n        setData(data => [...data, ...newRecipes]);\n        setSentRecipeIds(ids => [...ids, ...newRecipes.map(recipe => recipe._id)]);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    fetchData();\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [sortUrl, selectedIngredients, page]);\n  useEffect(() => {\n    setSentRecipeIds([]);\n    setSortUrl(`/recipes?username=${props.user.username}&ingredients=${selectedIngredients.map(selected => selected && selected.name).join(\",\")}`);\n  }, [selectedIngredients]);\n  const handleSortChange = option => {\n    setSortOption(option);\n    let sortUrl = \"\";\n    if (option === \"time\") {\n      sortUrl = `/recipes/sort-by-time?username=${props.user.username}&ingredients=${selectedIngredients.map(selected => selected && selected.name).join(\",\")}`;\n    } else if (option === \"similar\") {\n      sortUrl = `/recipes/sort-by-similar?username=${props.user.username}&ingredients=${selectedIngredients.map(selected => selected && selected.name).join(\",\")}`;\n    } else {\n      sortUrl = `/recipes?username=${props.user.username}&ingredients=${selectedIngredients.map(selected => selected && selected.name).join(\",\")}`;\n    }\n    setPerPage(10);\n    setData([]);\n    setSortUrl(sortUrl);\n    setPerPage(perPage => perPage + 10);\n  };\n  const handleIngredientSelect = ingredientName => {\n    const ingredientObject = {\n      name: ingredientName\n    };\n    if (selectedIngredients.some(ingredient => ingredient.name === ingredientName)) {\n      setSelectedIngredients(selectedIngredients.filter(ingredient => ingredient.name !== ingredientName));\n    } else {\n      setSelectedIngredients([...selectedIngredients, {\n        name: ingredientName\n      }]);\n    }\n    //setPerPage(perPage => perPage + 10);\n    setData([]);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"RecipeList\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Recipes\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"recipe-container\",\n      children: [/*#__PURE__*/_jsxDEV(SortBy, {\n        handleSortChange: handleSortChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(SelectIng, {\n        handleIngredientSelect: handleIngredientSelect,\n        user: props.user\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 7\n      }, this), selectedIngredients.length > 0 ? data.map(recipe => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"recipe\",\n        children: /*#__PURE__*/_jsxDEV(Link, {\n          to: `/${recipe._id}`,\n          className: \"recipe-link\",\n          children: [/*#__PURE__*/_jsxDEV(\"img\", {\n            src: `${baseUrl}${images}${recipe.Image_Name}.jpg`,\n            alt: recipe.Title,\n            className: \"recipe-image\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: recipe.Title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 13\n        }, this)\n      }, recipe._id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 11\n      }, this)) : /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Please select ingredients to view recipes.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 91,\n    columnNumber: 5\n  }, this);\n};\n_s(RecipeList, \"3aOo65cA6AHTydpTwEbYRjY5I08=\");\n_c = RecipeList;\nexport default RecipeList;\nvar _c;\n$RefreshReg$(_c, \"RecipeList\");","map":{"version":3,"names":["React","useState","useEffect","axios","Link","SortBy","SelectIng","jsxDEV","_jsxDEV","RecipeList","props","_s","baseUrl","process","env","REACT_APP_SERVER","images","data","setData","selectedIngredients","setSelectedIngredients","sortOption","setSortOption","page","setPage","perPage","setPerPage","sortUrl","setSortUrl","user","username","map","selected","name","join","sentRecipeIds","setSentRecipeIds","handleScroll","scrollTop","clientHeight","scrollHeight","document","documentElement","fetchData","response","get","newRecipes","recipes","filter","recipe","includes","_id","ids","error","console","window","addEventListener","removeEventListener","handleSortChange","option","handleIngredientSelect","ingredientName","ingredientObject","some","ingredient","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","to","src","Image_Name","alt","Title","_c","$RefreshReg$"],"sources":["/Users/alexkondratiuk/Desktop/whats-for-dinner-1/front-end/src/RecipeList.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport axios from \"axios\";\n// import Search from \"./Search\";\nimport { Link } from \"react-router-dom\"\nimport SortBy from \"./SortBy\";\nimport SelectIng from \"./SelectIng\";\nimport \"./RecipeList.css\";\n\nconst RecipeList = (props) => {\n  const baseUrl = process.env.REACT_APP_SERVER;\n  const images = '/api/images/';\n  const [data, setData] = useState([]);\n  const [selectedIngredients, setSelectedIngredients] = useState([]);\n  const [sortOption, setSortOption] = useState(\"\");\n  const [page, setPage] = useState(1);\n  const [perPage, setPerPage] = useState(10);\n  const [sortUrl, setSortUrl] = useState(`/recipes?username=${props.user.username}&ingredients=${selectedIngredients.map(selected => selected && selected.name).join(\",\")}`);\n  const [sentRecipeIds, setSentRecipeIds] = useState([]);\n\n  const handleScroll = async () => {\n    const { scrollTop, clientHeight, scrollHeight } = document.documentElement;\n    if (scrollTop + clientHeight >= scrollHeight) {\n      setPage((page) => page + 1);\n    }\n  };\n  \n  useEffect(() => {\n    const fetchData = async () => {\n      try {\n        const response = await axios.get(`${baseUrl}${sortUrl}&limit=${perPage}&sentRecipeIds=${sentRecipeIds.join(',')}`);\n        const newRecipes = response.data.recipes.filter(\n          recipe => !sentRecipeIds.includes(recipe._id)\n        );\n        setData(data => [...data, ...newRecipes]);\n        setSentRecipeIds(ids => [...ids, ...newRecipes.map(recipe => recipe._id)]);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n    \n  \n    fetchData();\n    window.addEventListener(\"scroll\", handleScroll);\n    return () => {\n      window.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [sortUrl, selectedIngredients, page]);\n    \n\n  useEffect(() => {\n    setSentRecipeIds([]);\n    setSortUrl(`/recipes?username=${props.user.username}&ingredients=${selectedIngredients.map(selected => selected && selected.name).join(\",\")}`);\n  }, [selectedIngredients]);\n\n  const handleSortChange = (option) => {\n    setSortOption(option);\n    let sortUrl = \"\";\n    if (option === \"time\") {\n      sortUrl = `/recipes/sort-by-time?username=${props.user.username}&ingredients=${selectedIngredients\n        .map((selected) => selected && selected.name)\n        .join(\",\")}`;\n    } else if (option === \"similar\") {\n      sortUrl = `/recipes/sort-by-similar?username=${props.user.username}&ingredients=${selectedIngredients\n        .map((selected) => selected && selected.name)\n        .join(\",\")}`;\n    } else {\n      sortUrl = `/recipes?username=${props.user.username}&ingredients=${selectedIngredients\n        .map((selected) => selected && selected.name)\n        .join(\",\")}`;\n    }\n    setPerPage(10);\n    setData([]);\n    setSortUrl(sortUrl);\n    setPerPage(perPage => perPage + 10);\n\n  };\n  \n\n  const handleIngredientSelect = (ingredientName) => {\n    const ingredientObject = { name: ingredientName };\n    if (selectedIngredients.some(ingredient => ingredient.name === ingredientName)) {\n      setSelectedIngredients(selectedIngredients.filter(ingredient => ingredient.name !== ingredientName));\n    } else {\n      setSelectedIngredients([...selectedIngredients, { name: ingredientName }]);\n    }\n    //setPerPage(perPage => perPage + 10);\n    setData([]);\n  };\n  \n  return (\n    <div className=\"RecipeList\">\n    <h1>Recipes</h1>\n    <div className=\"recipe-container\">\n      <SortBy handleSortChange={handleSortChange} />\n      <SelectIng handleIngredientSelect={handleIngredientSelect} user={props.user} />\n      {selectedIngredients.length > 0 ? (\n        data.map((recipe) => (\n          <div key={recipe._id} className=\"recipe\">\n            <Link to={`/${recipe._id}`} className=\"recipe-link\">\n              <img src={`${baseUrl}${images}${recipe.Image_Name}.jpg`} alt={recipe.Title} className=\"recipe-image\" />\n              <h3>{recipe.Title}</h3>\n            </Link>\n          </div>\n        ))\n      ) : (\n        <p>Please select ingredients to view recipes.</p>\n      )}\n    </div>\n  </div>\n  );\n};\n\nexport default RecipeList;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}